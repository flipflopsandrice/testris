!function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n?n:t)},d,d.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){(function(){!function(){var t={},e=null,o=!0,i=!1;try{"undefined"!=typeof AudioContext?e=new AudioContext:"undefined"!=typeof webkitAudioContext?e=new webkitAudioContext:o=!1}catch(r){o=!1}if(!o)if("undefined"!=typeof Audio)try{new Audio}catch(r){i=!0}else i=!0;if(o){var s="undefined"==typeof e.createGain?e.createGainNode():e.createGain();s.gain.value=1,s.connect(e.destination)}var a=function(t){this._volume=1,this._muted=!1,this.usingWebAudio=o,this.ctx=e,this.noAudio=i,this._howls=[],this._codecs=t,this.iOSAutoEnable=!0};a.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t>=0&&1>=t){e._volume=t,o&&(s.gain.value=t);for(var n in e._howls)if(e._howls.hasOwnProperty(n)&&e._howls[n]._webAudio===!1)for(var i=0;i<e._howls[n]._audioNode.length;i++)e._howls[n]._audioNode[i].volume=e._howls[n]._volume*e._volume;return e}return o?s.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e=this;e._muted=t,o&&(s.gain.value=t?0:e._volume);for(var n in e._howls)if(e._howls.hasOwnProperty(n)&&e._howls[n]._webAudio===!1)for(var i=0;i<e._howls[n]._audioNode.length;i++)e._howls[n]._audioNode[i].muted=t},codecs:function(t){return this._codecs[t]},_enableiOSAudio:function(){var t=this;if(!e||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t._iOSEnabled=!1;var n=function(){var o=e.createBuffer(1,1,22050),i=e.createBufferSource();i.buffer=o,i.connect(e.destination),"undefined"==typeof i.start?i.noteOn(0):i.start(0),setTimeout(function(){(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",n,!1))},0)};return window.addEventListener("touchstart",n,!1),t}}};var u=null,d={};i||(u=new Audio,d={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var f=new a(d),l=function(t){var n=this;n._autoplay=t.autoplay||!1,n._buffer=t.buffer||!1,n._duration=t.duration||0,n._format=t.format||null,n._loop=t.loop||!1,n._loaded=!1,n._sprite=t.sprite||{},n._src=t.src||"",n._pos3d=t.pos3d||[0,0,-.5],n._volume=void 0!==t.volume?t.volume:1,n._urls=t.urls||[],n._rate=t.rate||1,n._model=t.model||null,n._onload=[t.onload||function(){}],n._onloaderror=[t.onloaderror||function(){}],n._onend=[t.onend||function(){}],n._onpause=[t.onpause||function(){}],n._onplay=[t.onplay||function(){}],n._onendTimer=[],n._webAudio=o&&!n._buffer,n._audioNode=[],n._webAudio&&n._setupAudioNode(),"undefined"!=typeof e&&e&&f.iOSAutoEnable&&f._enableiOSAudio(),f._howls.push(n),n.load()};if(l.prototype={load:function(){var t=this,e=null;if(i)return void t.on("loaderror");for(var n=0;n<t._urls.length;n++){var o,r;if(t._format)o=t._format;else{if(r=t._urls[n],o=/^data:audio\/([^;,]+);/i.exec(r),o||(o=/\.([^.]+)$/.exec(r.split("?",1)[0])),!o)return void t.on("loaderror");o=o[1].toLowerCase()}if(d[o]){e=t._urls[n];break}}if(!e)return void t.on("loaderror");if(t._src=e,t._webAudio)h(t,e);else{var s=new Audio;s.addEventListener("error",function(){s.error&&4===s.error.code&&(a.noAudio=!0),t.on("loaderror",{type:s.error?s.error.code:0})},!1),t._audioNode.push(s),s.src=e,s._pos=0,s.preload="auto",s.volume=f._muted?0:t._volume*f.volume();var u=function(){t._duration=Math.ceil(10*s.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),s.removeEventListener("canplaythrough",u,!1)};s.addEventListener("canplaythrough",u,!1),s.load()}return t},urls:function(t){var e=this;return t?(e.stop(),e._urls="string"==typeof t?[t]:t,e._loaded=!1,e.load(),e):e._urls},play:function(t,n){var o=this;return"function"==typeof t&&(n=t),t&&"function"!=typeof t||(t="_default"),o._loaded?o._sprite[t]?(o._inactiveNode(function(i){i._sprite=t;var r=i._pos>0?i._pos:o._sprite[t][0]/1e3,s=0;o._webAudio?(s=o._sprite[t][1]/1e3-i._pos,i._pos>0&&(r=o._sprite[t][0]/1e3+r)):s=o._sprite[t][1]/1e3-(r-o._sprite[t][0]/1e3);var a,u=!(!o._loop&&!o._sprite[t][2]),d="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:d,sprite:t,loop:u};a=setTimeout(function(){!o._webAudio&&u&&o.stop(e.id).play(t,e.id),o._webAudio&&!u&&(o._nodeById(e.id).paused=!0,o._nodeById(e.id)._pos=0,o._clearEndTimer(e.id)),o._webAudio||u||o.stop(e.id),o.on("end",d)},1e3*s),o._onendTimer.push({timer:a,id:e.id})}(),o._webAudio){var l=o._sprite[t][0]/1e3,h=o._sprite[t][1]/1e3;i.id=d,i.paused=!1,g(o,[u,l,h],d),o._playStart=e.currentTime,i.gain.value=o._volume,"undefined"==typeof i.bufferSource.start?i.bufferSource.noteGrainOn(0,r,s):i.bufferSource.start(0,r,s)}else{if(4!==i.readyState&&(i.readyState||!navigator.isCocoonJS))return o._clearEndTimer(d),function(){var e=o,r=t,s=n,a=i,u=function(){e.play(r,s),a.removeEventListener("canplaythrough",u,!1)};a.addEventListener("canplaythrough",u,!1)}(),o;i.readyState=4,i.id=d,i.currentTime=r,i.muted=f._muted||i.muted,i.volume=o._volume*f.volume(),setTimeout(function(){i.play()},0)}return o.on("play"),"function"==typeof n&&n(d),o}),o):("function"==typeof n&&n(),o):(o.on("load",function(){o.play(t,n)}),o)},pause:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.pause(t)}),e;e._clearEndTimer(t);var n=t?e._nodeById(t):e._activeNode();if(n)if(n._pos=e.pos(null,t),e._webAudio){if(!n.bufferSource||n.paused)return e;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return e.on("pause"),e},stop:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.stop(t)}),e;e._clearEndTimer(t);var n=t?e._nodeById(t):e._activeNode();if(n)if(n._pos=0,e._webAudio){if(!n.bufferSource||n.paused)return e;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return e},mute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.mute(t)}),e;var n=t?e._nodeById(t):e._activeNode();return n&&(e._webAudio?n.gain.value=0:n.muted=!0),e},unmute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.unmute(t)}),e;var n=t?e._nodeById(t):e._activeNode();return n&&(e._webAudio?n.gain.value=e._volume:n.muted=!1),e},volume:function(t,e){var n=this;if(t=parseFloat(t),t>=0&&1>=t){if(n._volume=t,!n._loaded)return n.on("play",function(){n.volume(t,e)}),n;var o=e?n._nodeById(e):n._activeNode();return o&&(n._webAudio?o.gain.value=t:o.volume=t*f.volume()),n}return n._volume},loop:function(t){var e=this;return"boolean"==typeof t?(e._loop=t,e):e._loop},sprite:function(t){var e=this;return"object"==typeof t?(e._sprite=t,e):e._sprite},pos:function(t,n){var o=this;if(!o._loaded)return o.on("load",function(){o.pos(t)}),"number"==typeof t?o:o._pos||0;t=parseFloat(t);var i=n?o._nodeById(n):o._activeNode();if(i)return t>=0?(o.pause(n),i._pos=t,o.play(i._sprite,n),o):o._webAudio?i._pos+(e.currentTime-o._playStart):i.currentTime;if(t>=0)return o;for(var r=0;r<o._audioNode.length;r++)if(o._audioNode[r].paused&&4===o._audioNode[r].readyState)return o._webAudio?o._audioNode[r]._pos:o._audioNode[r].currentTime},pos3d:function(t,e,n,o){var i=this;if(e="undefined"!=typeof e&&e?e:0,n="undefined"!=typeof n&&n?n:-.5,!i._loaded)return i.on("play",function(){i.pos3d(t,e,n,o)}),i;if(!(t>=0||0>t))return i._pos3d;if(i._webAudio){var r=o?i._nodeById(o):i._activeNode();r&&(i._pos3d=[t,e,n],r.panner.setPosition(t,e,n),r.panner.panningModel=i._model||"HRTF")}return i},fade:function(t,e,n,o,i){var r=this,s=Math.abs(t-e),a=t>e?"down":"up",u=s/.01,d=n/u;if(!r._loaded)return r.on("load",function(){r.fade(t,e,n,o,i)}),r;r.volume(t,i);for(var f=1;u>=f;f++)!function(){var t=r._volume+("up"===a?.01:-.01)*f,n=Math.round(1e3*t)/1e3,s=e;setTimeout(function(){r.volume(n,i),n===s&&o&&o()},d*f)}()},fadeIn:function(t,e,n){return this.volume(0).play().fade(0,t,e,n)},fadeOut:function(t,e,n,o){var i=this;return i.fade(i._volume,t,e,function(){n&&n(),i.pause(o),i.on("end")},o)},_nodeById:function(t){for(var e=this,n=e._audioNode[0],o=0;o<e._audioNode.length;o++)if(e._audioNode[o].id===t){n=e._audioNode[o];break}return n},_activeNode:function(){for(var t=this,e=null,n=0;n<t._audioNode.length;n++)if(!t._audioNode[n].paused){e=t._audioNode[n];break}return t._drainPool(),e},_inactiveNode:function(t){for(var e=this,n=null,o=0;o<e._audioNode.length;o++)if(e._audioNode[o].paused&&4===e._audioNode[o].readyState){t(e._audioNode[o]),n=!0;break}if(e._drainPool(),!n){var i;if(e._webAudio)i=e._setupAudioNode(),t(i);else{e.load(),i=e._audioNode[e._audioNode.length-1];var r=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",s=function(){i.removeEventListener(r,s,!1),t(i)};i.addEventListener(r,s,!1)}}},_drainPool:function(){var t,e=this,n=0;for(t=0;t<e._audioNode.length;t++)e._audioNode[t].paused&&n++;for(t=e._audioNode.length-1;t>=0&&!(5>=n);t--)e._audioNode[t].paused&&(e._webAudio&&e._audioNode[t].disconnect(0),n--,e._audioNode.splice(t,1))},_clearEndTimer:function(t){for(var e=this,n=0,o=0;o<e._onendTimer.length;o++)if(e._onendTimer[o].id===t){n=o;break}var i=e._onendTimer[n];i&&(clearTimeout(i.timer),e._onendTimer.splice(n,1))},_setupAudioNode:function(){var t=this,n=t._audioNode,o=t._audioNode.length;return n[o]="undefined"==typeof e.createGain?e.createGainNode():e.createGain(),n[o].gain.value=t._volume,n[o].paused=!0,n[o]._pos=0,n[o].readyState=4,n[o].connect(s),n[o].panner=e.createPanner(),n[o].panner.panningModel=t._model||"equalpower",n[o].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),n[o].panner.connect(n[o]),n[o]},on:function(t,e){var n=this,o=n["_on"+t];if("function"==typeof e)o.push(e);else for(var i=0;i<o.length;i++)e?o[i].call(n,e):o[i].call(n);return n},off:function(t,e){var n=this,o=n["_on"+t],i=e?e.toString():null;if(i){for(var r=0;r<o.length;r++)if(i===o[r].toString()){o.splice(r,1);break}}else n["_on"+t]=[];return n},unload:function(){for(var e=this,n=e._audioNode,o=0;o<e._audioNode.length;o++)n[o].paused||(e.stop(n[o].id),e.on("end",n[o].id)),e._webAudio?n[o].disconnect(0):n[o].src="";for(o=0;o<e._onendTimer.length;o++)clearTimeout(e._onendTimer[o].timer);var i=f._howls.indexOf(e);null!==i&&i>=0&&f._howls.splice(i,1),delete t[e._src],e=null}},o)var h=function(e,n){if(n in t)return e._duration=t[n].duration,void p(e);if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),i=new Uint8Array(o.length),r=0;r<o.length;++r)i[r]=o.charCodeAt(r);c(i.buffer,e,n)}else{var s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onload=function(){c(s.response,e,n)},s.onerror=function(){e._webAudio&&(e._buffer=!0,e._webAudio=!1,e._audioNode=[],delete e._gainNode,delete t[n],e.load())};try{s.send()}catch(a){s.onerror()}}},c=function(n,o,i){e.decodeAudioData(n,function(e){e&&(t[i]=e,p(o,e))},function(){o.on("loaderror")})},p=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},g=function(n,o,i){var r=n._nodeById(i);r.bufferSource=e.createBufferSource(),r.bufferSource.buffer=t[n._src],r.bufferSource.connect(r.panner),r.bufferSource.loop=o[0],o[0]&&(r.bufferSource.loopStart=o[1],r.bufferSource.loopEnd=o[1]+o[2]),r.bufferSource.playbackRate.value=n._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:f,Howl:l}}),"undefined"!=typeof n&&(n.Howler=f,n.Howl=l),"undefined"!=typeof window&&(window.Howler=f,window.Howl=l)}()}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../bower_components/howler.js/howler.js","/../../bower_components/howler.js")},{buffer:2,oMfpAn:5}],2:[function(t,e,n){(function(e,o,i){function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var o=typeof t;if("base64"===e&&"string"===o)for(t=T(t);t.length%4!==0;)t+="=";var r;if("number"===o)r=M(t);else if("string"===o)r=i.byteLength(t,e);else{if("object"!==o)throw new Error("First argument needs to be a number, array or string.");r=M(t.length)}var s;i._useTypedArrays?s=i._augment(new Uint8Array(r)):(s=this,s.length=r,s._isBuffer=!0);var a;if(i._useTypedArrays&&"number"==typeof t.byteLength)s._set(t);else if(C(t))for(a=0;r>a;a++)s[a]=i.isBuffer(t)?t.readUInt8(a):t[a];else if("string"===o)s.write(t,0,e);else if("number"===o&&!i._useTypedArrays&&!n)for(a=0;r>a;a++)s[a]=0;return s}function r(t,e,n,o){n=Number(n)||0;var r=t.length-n;o?(o=Number(o),o>r&&(o=r)):o=r;var s=e.length;$(s%2===0,"Invalid hex string"),o>s/2&&(o=s/2);for(var a=0;o>a;a++){var u=parseInt(e.substr(2*a,2),16);$(!isNaN(u),"Invalid hex string"),t[n+a]=u}return i._charsWritten=2*a,a}function s(t,e,n,o){var r=i._charsWritten=P(j(e),t,n,o);return r}function a(t,e,n,o){var r=i._charsWritten=P(O(e),t,n,o);return r}function u(t,e,n,o){return a(t,e,n,o)}function d(t,e,n,o){var r=i._charsWritten=P(F(e),t,n,o);return r}function f(t,e,n,o){var r=i._charsWritten=P(D(e),t,n,o);return r}function l(t,e,n){return Y.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function h(t,e,n){var o="",i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)t[r]<=127?(o+=H(i)+String.fromCharCode(t[r]),i=""):i+="%"+t[r].toString(16);return o+H(i)}function c(t,e,n){var o="";n=Math.min(t.length,n);for(var i=e;n>i;i++)o+=String.fromCharCode(t[i]);return o}function p(t,e,n){return c(t,e,n)}function g(t,e,n){var o=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>o)&&(n=o);for(var i="",r=e;n>r;r++)i+=U(t[r]);return i}function w(t,e,n){for(var o=t.slice(e,n),i="",r=0;r<o.length;r+=2)i+=String.fromCharCode(o[r]+256*o[r+1]);return i}function v(t,e,n,o){o||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+1<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var r;return n?(r=t[e],i>e+1&&(r|=t[e+1]<<8)):(r=t[e]<<8,i>e+1&&(r|=t[e+1])),r}}function m(t,e,n,o){o||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+3<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var r;return n?(i>e+2&&(r=t[e+2]<<16),i>e+1&&(r|=t[e+1]<<8),r|=t[e],i>e+3&&(r+=t[e+3]<<24>>>0)):(i>e+1&&(r=t[e+1]<<16),i>e+2&&(r|=t[e+2]<<8),i>e+3&&(r|=t[e+3]),r+=t[e]<<24>>>0),r}}function b(t,e,n,o){o||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+1<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var r=v(t,e,n,!0),s=32768&r;return s?-1*(65535-r+1):r}}function y(t,e,n,o){o||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+3<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var r=m(t,e,n,!0),s=2147483648&r;return s?-1*(4294967295-r+1):r}}function _(t,e,n,o){return o||($("boolean"==typeof n,"missing or invalid endian"),$(e+3<t.length,"Trying to read beyond buffer length")),q.read(t,e,n,23,4)}function k(t,e,n,o){return o||($("boolean"==typeof n,"missing or invalid endian"),$(e+7<t.length,"Trying to read beyond buffer length")),q.read(t,e,n,52,8)}function A(t,e,n,o,i){i||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof o,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+1<t.length,"trying to write beyond buffer length"),R(e,65535));var r=t.length;if(!(n>=r))for(var s=0,a=Math.min(r-n,2);a>s;s++)t[n+s]=(e&255<<8*(o?s:1-s))>>>8*(o?s:1-s)}function x(t,e,n,o,i){i||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof o,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+3<t.length,"trying to write beyond buffer length"),R(e,4294967295));var r=t.length;if(!(n>=r))for(var s=0,a=Math.min(r-n,4);a>s;s++)t[n+s]=e>>>8*(o?s:3-s)&255}function E(t,e,n,o,i){i||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof o,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+1<t.length,"Trying to write beyond buffer length"),G(e,32767,-32768));var r=t.length;n>=r||(e>=0?A(t,e,n,o,i):A(t,65535+e+1,n,o,i))}function B(t,e,n,o,i){i||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof o,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+3<t.length,"Trying to write beyond buffer length"),G(e,2147483647,-2147483648));var r=t.length;n>=r||(e>=0?x(t,e,n,o,i):x(t,4294967295+e+1,n,o,i))}function I(t,e,n,o,i){i||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof o,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+3<t.length,"Trying to write beyond buffer length"),W(e,3.4028234663852886e38,-3.4028234663852886e38));var r=t.length;n>=r||q.write(t,e,n,o,23,4)}function S(t,e,n,o,i){i||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof o,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+7<t.length,"Trying to write beyond buffer length"),W(e,1.7976931348623157e308,-1.7976931348623157e308));var r=t.length;n>=r||q.write(t,e,n,o,52,8)}function T(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function L(t,e,n){return"number"!=typeof t?n:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function M(t){return t=~~Math.ceil(+t),0>t?0:t}function N(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function C(t){return N(t)||i.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function U(t){return 16>t?"0"+t.toString(16):t.toString(16)}function j(t){for(var e=[],n=0;n<t.length;n++){var o=t.charCodeAt(n);if(127>=o)e.push(t.charCodeAt(n));else{var i=n;o>=55296&&57343>=o&&n++;for(var r=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),s=0;s<r.length;s++)e.push(parseInt(r[s],16))}}return e}function O(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function D(t){for(var e,n,o,i=[],r=0;r<t.length;r++)e=t.charCodeAt(r),n=e>>8,o=e%256,i.push(o),i.push(n);return i}function F(t){return Y.toByteArray(t)}function P(t,e,n,o){for(var i=0;o>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function H(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function R(t,e){$("number"==typeof t,"cannot write a non-number as a number"),$(t>=0,"specified a negative value for writing an unsigned value"),$(e>=t,"value is larger than maximum value for type"),$(Math.floor(t)===t,"value has a fractional component")}function G(t,e,n){$("number"==typeof t,"cannot write a non-number as a number"),$(e>=t,"value larger than maximum allowed value"),$(t>=n,"value smaller than minimum allowed value"),$(Math.floor(t)===t,"value has a fractional component")}function W(t,e,n){$("number"==typeof t,"cannot write a non-number as a number"),$(e>=t,"value larger than maximum allowed value"),$(t>=n,"value smaller than minimum allowed value")}function $(t,e){if(!t)throw new Error(e||"Failed assertion")}var Y=t("base64-js"),q=t("ieee754");n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(n){return!1}}(),i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},i.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=j(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=F(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(t,e){if($(N(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new i(0);if(1===t.length)return t[0];var n;if("number"!=typeof e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var o=new i(e),r=0;for(n=0;n<t.length;n++){var s=t[n];s.copy(o,r),r+=s.length}return o},i.prototype.write=function(t,e,n,o){if(isFinite(e))isFinite(n)||(o=n,n=void 0);else{var i=o;o=e,e=n,n=i}e=Number(e)||0;var l=this.length-e;n?(n=Number(n),n>l&&(n=l)):n=l,o=String(o||"utf8").toLowerCase();var h;switch(o){case"hex":h=r(this,t,e,n);break;case"utf8":case"utf-8":h=s(this,t,e,n);break;case"ascii":h=a(this,t,e,n);break;case"binary":h=u(this,t,e,n);break;case"base64":h=d(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=f(this,t,e,n);break;default:throw new Error("Unknown encoding")}return h},i.prototype.toString=function(t,e,n){var o=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,n=void 0!==n?Number(n):n=o.length,n===e)return"";var i;switch(t){case"hex":i=g(o,e,n);break;case"utf8":case"utf-8":i=h(o,e,n);break;case"ascii":i=c(o,e,n);break;case"binary":i=p(o,e,n);break;case"base64":i=l(o,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=w(o,e,n);break;default:throw new Error("Unknown encoding")}return i},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(t,e,n,o){var r=this;if(n||(n=0),o||0===o||(o=this.length),e||(e=0),o!==n&&0!==t.length&&0!==r.length){$(o>=n,"sourceEnd < sourceStart"),$(e>=0&&e<t.length,"targetStart out of bounds"),$(n>=0&&n<r.length,"sourceStart out of bounds"),$(o>=0&&o<=r.length,"sourceEnd out of bounds"),o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var s=o-n;if(100>s||!i._useTypedArrays)for(var a=0;s>a;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+s),e)}},i.prototype.slice=function(t,e){var n=this.length;if(t=L(t,n,0),e=L(e,n,n),i._useTypedArrays)return i._augment(this.subarray(t,e));for(var o=e-t,r=new i(o,void 0,!0),s=0;o>s;s++)r[s]=this[s+t];return r},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.readUInt8=function(t,e){return e||($(void 0!==t&&null!==t,"missing offset"),$(t<this.length,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},i.prototype.readUInt16LE=function(t,e){return v(this,t,!0,e)},i.prototype.readUInt16BE=function(t,e){return v(this,t,!1,e)},i.prototype.readUInt32LE=function(t,e){return m(this,t,!0,e)},i.prototype.readUInt32BE=function(t,e){return m(this,t,!1,e)},i.prototype.readInt8=function(t,e){if(e||($(void 0!==t&&null!==t,"missing offset"),$(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){var n=128&this[t];return n?-1*(255-this[t]+1):this[t]}},i.prototype.readInt16LE=function(t,e){return b(this,t,!0,e)},i.prototype.readInt16BE=function(t,e){return b(this,t,!1,e)},i.prototype.readInt32LE=function(t,e){return y(this,t,!0,e)},i.prototype.readInt32BE=function(t,e){return y(this,t,!1,e)},i.prototype.readFloatLE=function(t,e){return _(this,t,!0,e)},i.prototype.readFloatBE=function(t,e){return _(this,t,!1,e)},i.prototype.readDoubleLE=function(t,e){return k(this,t,!0,e)},i.prototype.readDoubleBE=function(t,e){return k(this,t,!1,e)},i.prototype.writeUInt8=function(t,e,n){n||($(void 0!==t&&null!==t,"missing value"),$(void 0!==e&&null!==e,"missing offset"),$(e<this.length,"trying to write beyond buffer length"),R(t,255)),e>=this.length||(this[e]=t)},i.prototype.writeUInt16LE=function(t,e,n){A(this,t,e,!0,n)},i.prototype.writeUInt16BE=function(t,e,n){A(this,t,e,!1,n)},i.prototype.writeUInt32LE=function(t,e,n){x(this,t,e,!0,n)},i.prototype.writeUInt32BE=function(t,e,n){x(this,t,e,!1,n)},i.prototype.writeInt8=function(t,e,n){n||($(void 0!==t&&null!==t,"missing value"),$(void 0!==e&&null!==e,"missing offset"),$(e<this.length,"Trying to write beyond buffer length"),G(t,127,-128)),e>=this.length||(t>=0?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},i.prototype.writeInt16LE=function(t,e,n){E(this,t,e,!0,n)},i.prototype.writeInt16BE=function(t,e,n){E(this,t,e,!1,n)},i.prototype.writeInt32LE=function(t,e,n){B(this,t,e,!0,n)},i.prototype.writeInt32BE=function(t,e,n){B(this,t,e,!1,n)},i.prototype.writeFloatLE=function(t,e,n){I(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){I(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){S(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){S(this,t,e,!1,n)},i.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),$("number"==typeof t&&!isNaN(t),"value is not a number"),$(n>=e,"end < start"),n!==e&&0!==this.length){$(e>=0&&e<this.length,"start out of bounds"),$(n>=0&&n<=this.length,"end out of bounds");for(var o=e;n>o;o++)this[o]=t}},i.prototype.inspect=function(){for(var t=[],e=this.length,o=0;e>o;o++)if(t[o]=U(this[o]),o===n.INSPECT_MAX_BYTES){t[o+1]="...";break}return"<Buffer "+t.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i._useTypedArrays)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var z=i.prototype;i._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=z.get,t.set=z.set,t.write=z.write,t.toString=z.toString,t.toLocaleString=z.toString,t.toJSON=z.toJSON,t.copy=z.copy,t.slice=z.slice,t.readUInt8=z.readUInt8,t.readUInt16LE=z.readUInt16LE,t.readUInt16BE=z.readUInt16BE,t.readUInt32LE=z.readUInt32LE,t.readUInt32BE=z.readUInt32BE,t.readInt8=z.readInt8,t.readInt16LE=z.readInt16LE,t.readInt16BE=z.readInt16BE,t.readInt32LE=z.readInt32LE,t.readInt32BE=z.readInt32BE,t.readFloatLE=z.readFloatLE,t.readFloatBE=z.readFloatBE,t.readDoubleLE=z.readDoubleLE,t.readDoubleBE=z.readDoubleBE,t.writeUInt8=z.writeUInt8,t.writeUInt16LE=z.writeUInt16LE,t.writeUInt16BE=z.writeUInt16BE,t.writeUInt32LE=z.writeUInt32LE,t.writeUInt32BE=z.writeUInt32BE,t.writeInt8=z.writeInt8,t.writeInt16LE=z.writeInt16LE,t.writeInt16BE=z.writeInt16BE,t.writeInt32LE=z.writeInt32LE,t.writeInt32BE=z.writeInt32BE,t.writeFloatLE=z.writeFloatLE,t.writeFloatBE=z.writeFloatBE,t.writeDoubleLE=z.writeDoubleLE,t.writeDoubleBE=z.writeDoubleBE,t.fill=z.fill,t.inspect=z.inspect,t.toArrayBuffer=z.toArrayBuffer,t}}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/index.js","/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer")},{"base64-js":3,buffer:2,ieee754:4,oMfpAn:5}],3:[function(t,e,n){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function n(t){var e=t.charCodeAt(0);return e===s||e===l?62:e===a||e===h?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:d+26>e?e-d+26:void 0}function o(t){function e(t){d[l++]=t}var o,i,s,a,u,d;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,d=new r(3*t.length/4-u),s=u>0?t.length-4:t.length;var l=0;for(o=0,i=0;s>o;o+=4,i+=3)a=n(t.charAt(o))<<18|n(t.charAt(o+1))<<12|n(t.charAt(o+2))<<6|n(t.charAt(o+3)),e((16711680&a)>>16),e((65280&a)>>8),e(255&a);return 2===u?(a=n(t.charAt(o))<<2|n(t.charAt(o+1))>>4,e(255&a)):1===u&&(a=n(t.charAt(o))<<10|n(t.charAt(o+1))<<4|n(t.charAt(o+2))>>2,e(a>>8&255),e(255&a)),d}function i(e){function n(e){return t.charAt(e)}function o(t){return n(t>>18&63)+n(t>>12&63)+n(t>>6&63)+n(63&t)}var i,r,s,a=e.length%3,u="";for(i=0,s=e.length-a;s>i;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=o(r);switch(a){case 1:r=e[e.length-1],u+=n(r>>2),u+=n(r<<4&63),u+="==";break;case 2:r=(e[e.length-2]<<8)+e[e.length-1],u+=n(r>>10),u+=n(r>>4&63),u+=n(r<<2&63),u+="="}return u}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),d="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=o,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib")},{buffer:2,oMfpAn:5}],4:[function(t,e,n){(function(){n.read=function(t,e,n,o,i){var r,s,a=8*i-o-1,u=(1<<a)-1,d=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,c=t[e+l];for(l+=h,r=c&(1<<-f)-1,c>>=-f,f+=a;f>0;r=256*r+t[e+l],l+=h,f-=8);for(s=r&(1<<-f)-1,r>>=-f,f+=o;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===r)r=1-d;else{if(r===u)return s?0/0:1/0*(c?-1:1);s+=Math.pow(2,o),r-=d}return(c?-1:1)*s*Math.pow(2,r-o)},n.write=function(t,e,n,o,i,r){var s,a,u,d=8*r-i-1,f=(1<<d)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,c=o?0:r-1,p=o?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?h/u:h*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+c]=255&a,c+=p,a/=256,i-=8);for(s=s<<i|a,d+=i;d>0;t[n+c]=255&s,c+=p,s/=256,d-=8);t[n+c-p]|=128*g}}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754")},{buffer:2,oMfpAn:5}],5:[function(t,e){(function(t){function n(){}var t=e.exports={};t.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=n,t.addListener=n,t.once=n,t.off=n,t.removeListener=n,t.removeAllListeners=n,t.emit=n,t.binding=function(){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(){throw new Error("process.chdir is not supported")}}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/process/browser.js","/../../node_modules/gulp-browserify/node_modules/browserify/node_modules/process")
},{buffer:2,oMfpAn:5}],6:[function(t,e){(function(){var n=function(e){var n=t("../models/grid"),o=t("../models/block");return this.mainController=e,this.grid=!1,this.block=!1,this.blockID=0,this.score=0,this.nextBlock=!1,this.blockingEnabled=!1,this.init=function(){this.grid=new n,this.score=0},this.move=function(t,e){this.grid||this.init();var n=!1;this.fieldEmpty()?this.spawnBlock():n=this.moveBlock(t,e),!n&&this.checkScorableConditions(),this.mainController.views.world.draw(this.grid,this.score,this.block,this.blockID,this.nextBlock)},this.checkScorableConditions=function(){for(var t=[],e=0;e<this.grid.length;e++)this.grid[e].indexOf(0)<0&&(this.score+=10,t.push(e));for(var n=[],o=0,i=0;i<this.grid[0].length;i++)n[i]=0;for(var i=0;i<t.length;i++)this.grid.splice(t[i],1),this.grid.unshift(Object.create(n)),o++;t.length>0&&this.mainController.controllers.sound.play("score")},this.spawnBlock=function(){this.block=this.nextBlock?this.nextBlock:new o,this.nextBlock=new o;var t=Math.round(.5*this.grid[0].length-.5*this.block.shape[0].length);this.blockID=(new Date).getTime(),this.checkOverlap(this.block.shape,this.blockID,0,t)?this.gameOver():this.injectBlock(0,t)},this.injectBlock=function(t,e){for(var n=0;n<this.block.shape.length;n++)for(var o=0;o<this.block.shape[n].length;o++)this.block.shape[n][o]>0&&"undefined"!=typeof this.grid[n+t]&&"undefined"!=typeof this.grid[n+t][o+e]&&(this.grid[n+t][o+e]=this.blockID)},this.rotate=function(){for(var t=[],e=0;e<this.block.shape[0].length;e++){for(var n=this.block.shape.length-1;n>=0;n--)"undefined"==typeof t[e]&&(t[e]=[]),t[e][n]=this.block.shape[n][e];t[e].reverse()}for(var o={top:-1,left:-1},e=0;e<this.grid.length;e++)if((n=this.grid[e].indexOf(this.blockID))>-1){o.top=e,o.left=n;break}if(o.top<0||o.left<0)return!1;if(o.top=o.top+Math.floor(this.block.shape.length/2)-Math.floor(t.length/2),o.left=o.left+Math.floor(this.block.shape[0].length/2)-Math.floor(t[0].length/2)-this.block.shape[0].indexOf(1),this.checkOverlap(t,this.blockID,o.top,o.left))return!1;this.block.shape=t;for(var e=0;e<this.grid.length;e++)for(var n=0;n<this.grid[e].length;n++)this.grid[e][n]==this.blockID&&(this.grid[e][n]=0);this.injectBlock(o.top,o.left),this.mainController.views.world.draw(this.grid,this.score,this.block,this.blockID,this.nextBlock),this.mainController.controllers.sound.play("rotate")},this.moveBlock=function(t,e){if(this.blockingEnabled)return!1;this.blockingEnabled=!0;for(var n=!0,o=!1,i=0,r=0,s=0;s<this.grid.length&&n;s++)if((r=this.grid[s].indexOf(this.blockID))>-1){blockInnerOffset=this.block.shape[0].indexOf(1),i=s;var a=s+this.block.shape.length;a>=this.grid.length?(n=!1,o=!0):this.checkOverlap(this.block.shape,this.blockID,i+e,r-blockInnerOffset+t)&&(n=!1,e&&(o=!0));break}if(!n)return this.blockingEnabled=!1,o&&0==i?this.gameOver():o&&this.spawnBlock(),this.mainController.controllers.sound.play("cantmove"),!1;for(var s=0;s<this.grid.length;s++)for(var u=0;u<this.grid[s].length;u++)this.grid[s][u]==this.blockID&&(this.grid[s][u]=0);var d=i+e,f=r-this.block.shape[0].map(function(t){return t>0?1:0}).indexOf(1)+t;return this.injectBlock(d,f),t&&this.mainController.controllers.sound.play("move"),e&&this.mainController.controllers.sound.play("down"),this.blockingEnabled=!1,!0},this.checkOverlap=function(t,e,n,o){if(n+t.length>this.grid.length||o+t[0].length>this.grid[0].length||0>o)return!0;for(var i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++)if("undefined"!=typeof this.grid[n+i]&&"undefined"!=typeof this.grid[n+i][o+r]&&0!=t[i][r]&&this.grid[n+i][o+r]!=e&&0!=this.grid[n+i][o+r])return!0;return!1},this.fieldEmpty=function(){return this.grid.filter(function(t){return t.filter(function(t){return t>0}).length}).length<1},this.gameOver=function(){this.mainController.controllers.sound.stop(),this.mainController.stop()},this.detach=function(){},this.pad=function i(t){t=t.toString();var e=3,n="0";return e<=t.length?t:i(n+t)},this};e.exports=n}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/controllers/game.js","/controllers")},{"../models/block":11,"../models/grid":12,buffer:2,oMfpAn:5}],7:[function(t,e){(function(){var t=function(t){return this.mainController=t,this.keypressListener=!1,this.clickListener=!1,this.init=function(){this.addListeners()},this.addListeners=function(){this.keypressListener||(this.keypressListener=this.keypress.bind(this),window.addEventListener("keydown",this.keypressListener)),this.clickListener||(this.clickListener=this.click.bind(this),window.addEventListener("click",this.clickListener),window.addEventListener("touchstart",this.clickListener))},this.keypress=function(t){this.mainController.playing?([37,39].indexOf(t.keyCode)>-1&&this.execute("move",-1*(38-t.keyCode)),40===t.keyCode&&this.execute("down"),38===t.keyCode&&this.execute("rotate"),27==t.keyCode&&this.mainController.stop()):32==t.keyCode&&this.mainController.start()},this.click=function(){if(this.mainController.playing){var t=event.pageX,e=event.pageY,n=this.mainController.views.world["interface"].grid.buttonAt(t-this.mainController.views.world.context.canvas.offsetX,e-this.mainController.views.world.context.canvas.offsetY);n&&this.execute(n.name,n.param)}else this.mainController.start()},this.execute=function(t,e){switch(t){case"move":this.mainController.controllers.game.move(e,0);break;case"down":this.mainController.controllers.game.move(0,1);break;case"rotate":this.mainController.controllers.game.rotate()}},this.detach=function(){window.removeEventListener("keydown",this.keypressListener),window.removeEventListener("click",this.clickListener),window.removeEventListener("touchstart",this.clickListener)},this};e.exports=t}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/controllers/input.js","/controllers")},{buffer:2,oMfpAn:5}],8:[function(t,e){(function(){var n=function(){var e=t("./game"),n=t("./input"),o=t("./sound"),i=t("./../views/world");return this.playing=!1,this.tickLength=1e3,this.tickTimer=!1,this.tickStart=!1,this.tickPhases={3e5:1.5,6e5:2,9e5:2.5,12e5:3,15e5:3.5,18e5:4.5,21e5:5.5},this.controllers={game:!1,input:!1,sound:!1},this.views={world:!1},this.init=function(){this.controllers.sound=new o(this),this.controllers.game=new e(this),this.controllers.input=new n(this),this.views.world=new i,this.bootup()},this.bootup=function(){this.views.world.init(this.playing),this.controllers.sound.init(),this.controllers.input.init()},this.start=function(){this.playing=!0,this.controllers.game.init(),this.controllers.input.init(),this.views.world.init(this.playing),this.tick()},this.tick=function(){this.tickTimer||(this.setTickTimer(1),this.tickStart=new Date);for(var t in this.tickPhases){var e=new Date;this.tickStart.getTime()+parseInt(t)<=e.getTime()&&(this.setTickTimer(this.tickPhases[t]),delete this.tickPhases[t],this.controllers.sound.play("levelup"))}this.controllers.game.move(0,1)},this.setTickTimer=function(t){this.tickTimer&&clearInterval(this.tickTimer),this.tickTimer=setInterval(this.tick.bind(this),this.tickLength/t)},this.stop=function(){this.playing=!1,clearInterval(this.tickTimer),this.tickTimer=!1,this.detach(),this.bootup()},this.detach=function(){this.controllers.game.detach(),this.controllers.sound.stop()},this};e.exports=n}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/controllers/main.js","/controllers")},{"./../views/world":17,"./game":6,"./input":7,"./sound":9,buffer:2,oMfpAn:5}],9:[function(t,e){(function(){var n=function(e){return this.mainController=e,this.howler=t("../../../bower_components/howler.js/howler.js"),this.sounds={},this.init=function(){this.sounds.rotate=new Howl({urls:["res/audio/rotate.mp3"],volume:.3,loop:!1}),this.sounds.move=new Howl({urls:["res/audio/move.mp3"],volume:.2,loop:!1}),this.sounds.down=new Howl({urls:["res/audio/down.mp3"],volume:.2,loop:!1}),this.sounds.cantmove=new Howl({urls:["res/audio/cantmove.mp3"],volume:.4,loop:!1}),this.sounds.score=new Howl({urls:["res/audio/score.mp3"],volume:.4,loop:!1}),this.sounds.levelup=new Howl({urls:["res/audio/levelup.mp3"],volume:.4,loop:!1})},this.play=function(t,e){t&&(e?this.sounds[t].fade(0,.7,1e3):this.sounds[t].play())},this.stop=function(t,e){if(t)e?this.sounds[t].fade(.7,0,1e3):this.sounds[t].stop();else for(var t in this.sounds)this.sounds[t].stop()},this.mute=function(t){Howler.volume(t?0:1)},this};e.exports=n}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/controllers/sound.js","/controllers")},{"../../../bower_components/howler.js/howler.js":1,buffer:2,oMfpAn:5}],10:[function(t){(function(){"use strict";window.onload=function(){var e=t("./controllers/main");(new e).init();var n=new Event("resize");window.dispatchEvent(n)}}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_f5c1e81e.js","/")},{"./controllers/main":8,buffer:2,oMfpAn:5}],11:[function(t,e){(function(){var t=function(){var t=[[[1,0],[1,0],[1,1]],[[0,1],[0,1],[1,1]],[[1,1,1,1]],[[1,1,1],[0,1,0]],[[1,1],[1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]]];this.shape=t[Math.floor(Math.random()*t.length)],this.color="#"+function e(t){return(t+=[3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(13*Math.random())])&&6==t.length?t:e(t)}("")};e.exports=t}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/models/block.js","/models")},{buffer:2,oMfpAn:5}],12:[function(t,e){(function(){var t=function(t,e){t||(t=15),e||(e=20);for(var n=[],o=0;t>o;o++){n[o]=[];for(var i=0;e>i;i++)n[o][i]=0}return n};e.exports=t}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/models/grid.js","/models")},{buffer:2,oMfpAn:5}],13:[function(t,e){(function(){var t=function(){this.isMobileDevice=function(){return!!("ontouchstart"in window)}};e.exports=t}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/tools/mobile.js","/tools")},{buffer:2,oMfpAn:5}],14:[function(t,e){(function(){var n=function(){var e=t("./../tools/mobile");return this.mobileTools=new e,this.context=!1,this.data=!1,this.score=0,this.blocks={},this.nextBlock=!1,this.buttons=[],this.positions={orientation:"h",block:{padding:5},grid:{top:0,left:0,width:!1,height:!1},scoreboard:{top:0,left:0,width:!1,height:!1,padding:20}},this.draw=function(t,e,n,o,i,r){this.context=t,r&&(this.nextBlock=r),i&&o&&(this.blocks[i]=o),e&&(this.data=e),n&&(this.score=n);var s={width:this.context.canvas.width,height:this.context.canvas.height};s.width>=s.height?(this.positions.orientation="h",this.positions.grid.top=0,this.positions.grid.left=0,this.positions.grid.width=.75*s.width,this.positions.grid.height=s.height,this.positions.scoreboard.top=0,this.positions.scoreboard.left=this.positions.grid.width,this.positions.scoreboard.width=s.width-this.positions.grid.width,this.positions.scoreboard.height=s.height):(this.positions.orientation="v",this.positions.grid.top=0,this.positions.grid.left=0,this.positions.grid.width=s.width,this.positions.grid.height=.5*s.height,this.positions.scoreboard.top=this.positions.grid.height,this.positions.scoreboard.left=0,this.positions.scoreboard.width=s.width,this.positions.scoreboard.height=s.height-this.positions.grid.height),this.drawBackground(),this.drawScoreboard(),this.drawData()},this.drawBackground=function(){this.context.fillStyle="#444",this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height)},this.drawScoreboard=function(){if(this.context.fillStyle="#1c1c1c",this.context.fillRect(this.positions.scoreboard.left,this.positions.scoreboard.top,this.positions.scoreboard.width,this.positions.scoreboard.height),this.context.font="15pt monospace",this.context.fillStyle="#FFFFFF",this.context.fillText("Score: "+this.score,this.positions.scoreboard.left+this.positions.scoreboard.padding,this.positions.scoreboard.top+this.positions.scoreboard.padding),this.nextBlock){this.context.font="10pt monospace",this.context.fillStyle="#999",this.context.fillText("Next block ",this.positions.scoreboard.left+this.positions.scoreboard.padding,this.positions.scoreboard.top+this.positions.scoreboard.padding+25);var t=Math.round(this.positions.scoreboard.width/2/this.nextBlock.shape[0].length),e=t;this.positions.scoreboard.width>this.positions.scoreboard.height&&(e=Math.round(this.positions.scoreboard.height/3/this.nextBlock.shape[0].length),t=e),this.drawBlocks(this.positions.scoreboard.left+this.positions.scoreboard.padding,this.positions.scoreboard.top+60,t,e,this.nextBlock.shape)}if(this.mobileTools.isMobileDevice()){var n=this.positions.scoreboard.width/3-this.positions.scoreboard.width/12,o=this.positions.scoreboard.height/6,i=.1*n,r=this.positions.scoreboard.left+this.positions.scoreboard.padding;this.positions.scoreboard.width>this.positions.scoreboard.height&&(r+=this.positions.scoreboard.width/2,n/=2,i/=2,o*=2),o>n?o=n:n=o;var s=this.positions.scoreboard.top+this.positions.scoreboard.height-this.positions.scoreboard.padding-o;this.addButton("up","rotate",r+n+i,s-o-10,n,o),this.addButton("down","down",r+n+i,s,n,o),this.addButton("left","move",r,s,n,o,-1),this.addButton("right","move",r+n+i+n+i,s,n,o,1)}},this.drawData=function(){if(!this.data)return!1;var t=this.positions.grid.width,e=Math.round(t/this.data[0].length),n=Math.round(this.positions.grid.height/this.data.length);this.drawBlocks(this.positions.grid.top,this.positions.grid.left,e,n,this.data)},this.drawBlocks=function(t,e,n,o,i){for(var r=0;r<i.length;r++)for(var s=0;s<i[r].length;s++)i[r][s]>0&&this.drawBlock(t+s*n-this.positions.block.padding,e+r*o-this.positions.block.padding,n,o,"object"==typeof this.blocks[i[r][s]]?this.blocks[i[r][s]].color:this.nextBlock.color)},this.drawBlock=function(t,e,n,o,i){this.context.fillStyle=i,this.context.fillRect(t+this.positions.block.padding,e+this.positions.block.padding,n-this.positions.block.padding,o-this.positions.block.padding)},this.addButton=function(t,e,n,o,i,r,s){var a=2;this.context.fillStyle="#333",this.context.fillRect(n,o,i,r),this.context.fillStyle="#555",this.context.fillRect(n+a,o+a,i-2*a,r-2*a),this.context.font="7pt monospace",this.context.fillStyle="#fff",this.context.fillText(e,n+5,o+r/2),this.buttons.push({title:t,x:n,y:o,width:i,height:r,name:e,param:s})},this.buttonAt=function(t,e){for(var n=0;n<this.buttons.length;n++)if(t>this.buttons[n].x&&t<this.buttons[n].x+this.buttons[n].width&&e>this.buttons[n].y&&e<this.buttons[n].y+this.buttons[n].height)return this.buttons[n]},this};e.exports=n}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/views/grid.js","/views")},{"./../tools/mobile":13,buffer:2,oMfpAn:5}],15:[function(t,e){(function(){var t=function(){return this.context=!1,this.score=!1,this.draw=function(t,e){this.context=t,this.score=e,this.drawBasics()},this.drawBasics=function(){this.context.fillStyle="#ffffff",this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.font="10pt monospace",this.context.fillStyle="#000000",this.context.fillText("TESTRIS - hit space or tap to start",25,25),this.score&&(this.context.font="10pt monospace",this.context.fillStyle="#000000",this.context.fillText("Your score was: "+this.score,25,50))},this};e.exports=t}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/views/open.js","/views")},{buffer:2,oMfpAn:5}],16:[function(t,e){(function(){var t=function(){return this.context=!1,this.buttons={},this.draw=function(t){this.context=t,this.drawHeader()},this.drawHeader=function(){this.context.font="10pt monospace",this.context.fillStyle="#FFFFFF",this.context.fillText("TESTRIS",25,25)},this};e.exports=t}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/views/ui.js","/views")},{buffer:2,oMfpAn:5}],17:[function(t,e){(function(){var n=function(){var e=t("./ui"),n=t("./grid"),o=t("./open");return this.element=!1,this.context=!1,this.playing=!1,this["interface"]={ui:!1,grid:!1,open:!1},this.score=0,this.init=function(t){this.playing=t,this.element=document.getElementById("world"),this.context=this.element.getContext("2d"),this["interface"].ui=new e,this["interface"].grid=new n,this["interface"].open=new o,this.addListeners(),this.resize()},this.addListeners=function(){window.addEventListener("resize",this.resize.bind(this))},this.resize=function(){var t=640,e=360;window.innerWidth<window.innerHeight&&(t=360,e=640);var n=window.innerWidth/t,o=window.innerHeight/e,i=Math.min(n,o),r=t*i,s=e*i;if(this.context.canvas.width!=r||this.context.canvas.height!=s){this.context.canvas.width=r,this.context.canvas.height=s;var a=Math.round(this.context.canvas.height/2),u=Math.round(this.context.canvas.width/2);this.context.canvas.offsetX=(window.innerWidth-this.context.canvas.width)/2,this.context.canvas.offsetY=(window.innerHeight-this.context.canvas.height)/2,this.element.style.marginTop="-"+a+"px",this.element.style.marginLeft="-"+u+"px"}this.draw()},this.draw=function(t,e,n,o,i){e&&(this.score=e),this.playing?(this["interface"].grid.draw(this.context,t,e,n,o,i),this["interface"].ui.draw(this.context,e)):this["interface"].open.draw(this.context,this.score)},this};e.exports=n}).call(this,t("oMfpAn"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/views/world.js","/views")},{"./grid":14,"./open":15,"./ui":16,buffer:2,oMfpAn:5}]},{},[10]);